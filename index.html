<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet" >

    <title>HiberSunda | Undak Usuk Basa Sunda</title>
  </head>
  <body>
    <nav class="navbar navbar-light bg-light">
        <div class="container-fluid">
          <form class="d-flex">
            <input id="substring" class="form-control me-2" type="search" placeholder="Pilari" aria-label="Search" onkeydown="searchWords()">
          </form>
        </div>
      </nav>
      <table id="table-words" class="table table-success table-striped">
        <thead>
          <th>#</th>
          <th>Lemes ka Sorangan</th>
          <th>Lemes ka Batur</th>
          <th>Basa Loma</th>
          <th>Bahasa Indonesia</th>
        </thead>
        <tbody></tbody>
      </table>
  </body>
</html>
<script src="js/bootstrap.min.js" ></script>
<script src="js/env.js"></script>
<script src="js/apiCalls.js"></script>
<script>
  window.onload = 
    getAllWords(
      function (data) {
        displayWords(data)
      }, 
      function () {
        console.log("Error");
      }
    );

  function displayWords(data) {
    const tableBody = document.getElementById("table-words").getElementsByTagName('tbody')[0];

    let index = 0;
    data.forEach(word => {
        const row = tableBody.insertRow(index);
        index++;
        const noCell = row.insertCell(0);
        const soranganCell = row.insertCell(1);
        const baturCell = row.insertCell(2);
        const lomaCell = row.insertCell(3);
        const bindoCell = row.insertCell(4);
        noCell.innerHTML = "<b>"+index+"</b>";
        soranganCell.innerHTML = word.sorangan;
        baturCell.innerHTML = word.batur; 
        lomaCell.innerHTML = word.loma; 
        bindoCell.innerHTML = word.bindo; 
    });
  }

  function searchWords() {
    const substring = document.getElementById('substring').value;
    getWordsBySubstring(
      substring,
      function (data) {
        clearWords();
        displayWords(data);
      },
      function () {
        console.log("Error");
      }
    )
  }

  function clearWords() {
    const tableBody = document.getElementById("table-words").getElementsByTagName('tbody')[0];
    tableBody.textContent = "";
  }
</script>
